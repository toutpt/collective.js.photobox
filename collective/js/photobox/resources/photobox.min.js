/*!
	photobox v1
	(c) 2012 Yair Even Or <http://dropthebit.com>

	based (~15%) on Picbox v2.2 from:
	(c) 2010 Ben Kay <http://bunnyfire.co.uk>

	which is by itself based on code from Slimbox v1.7 - The ultimate lightweight Lightbox clone
	(c) 2007-2009 Christophe Beyls <http://www.digitalia.be>

	Uses jQuery-mousewheel Version: 3.0.6
	(c) 2009 Brandon Aaron <http://brandonaaron.net>

	MIT-style license.
*/
(function(A,f){var R=A(window),r,b=[],B,F,S=-1,l,E,Q,M,K,s,y="",N="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",x,H,p,v=A(),j={},q=new Image(),V=new Image(),U,C,c,k,u,J,D={loop:true,thumbs:true,counter:true,title:true,hideFlash:true,keys:{close:"27, 88, 67",prev:"37, 80",next:"39, 78"}};A(f).ready(function(){A(f.body).prepend(A([U=A('<div id="pbOverlay">').hide().on("click",P).append(imageWrap=A('<div class="pbLoader"><b></b><b></b><b></b></div>'),k=A('<div id="pbPrevBtn" class="prevNext"><b></b></div>').on("click",t),u=A('<div id="pbNextBtn" class="prevNext"><b></b></div>').on("click",t),imageWrap=A('<div class="imageWrap">').append(c=A("<img>")[0])[0],C=A('<div id="pbCloseBtn">').append("<b>Ã—</b>").on("click",P)[0],J=A('<div id="pbCaption">').append('<div class="title">').append('<div class="counter">'))[0],]));x=m("transformOrigin")});A.photobox=function(X,i){r=A.extend(D,i||{});jQuery.browser.msie&&A(U).addClass("msie");h(1);if(b.length<2){J.find(".counter").remove()}return a(X,true)};A.fn.photobox=function(i,Y){F=this;F.each(function(Z){var aa=this;b[Z]=[aa.href,aa.firstChild.getAttribute("alt")||aa.firstChild.getAttribute("title")]});if(D.thumbs||i.thumbs){L(F)}A(f).on("click",this.selector,X);function X(Z){Z.preventDefault();if(b.length<2){A([k,u]).remove()}s=f.documentElement;return A.photobox(A.inArray(this,F),i)}return this};function L(X){B=A("<div>").addClass("pbThumbs");var i=A("<ul>").appendTo(B);B.appendTo(J);X.each(function(){A("<li>").append(A(this).clone()).appendTo(i)});A(U).addClass("thumbs");B.on("click","a",w).data("a",B.find("a"))}function w(X){X.preventDefault();v.removeClass("active");v=A(this).parent().addClass("active");var i=A.inArray(this,A(X.delegateTarget).data("a"));return a(i,0,1)}function m(aa){var Y,Z=f.body.style,X=["ms","O","Moz","Webkit"];if(Z[aa]==""){return aa}aa=aa[0].toUpperCase()+aa.slice(1);for(Y=X.length;Y--;){if(Z[X[Y]+aa]==""){return(X[Y]+aa)}}}function h(i){c.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";A(c).css({transition:"0s"}).removeAttr("style");A(U).show().addClass("show");A(U).on("click","img",function(Y){Y.stopPropagation()});A(U).on(N,function(){A(c).addClass("zoomable");A(U).off(N).addClass("on")});if(jQuery.browser.msie){A(U).trigger("MSTransitionEnd")}if(r.hideFlash){A.each(["object","embed"],function(Y,Z){A(Z).each(function(){if(i){this._picbox=this.style.visibility}this.style.visibility=i?"hidden":this._picbox})})}var X=i?"on":"off";A(f)[X]({"keydown.photobox":n,"mousewheel.photobox":g});if(r.thumbs){v.removeAttr("class");A(R).on("resize.photobox",W);W()}}function W(){H=B[0].clientWidth;p=B[0].firstChild.clientWidth;var i=p>H?"on":"off";B[i]("mousemove",e)}function e(X){var i=p/H;B[0].scrollLeft=X.pageX*i-500}function n(Z){var Y=Z.keyCode,X=r.keys,i;return X.close.indexOf(Y)>=0&&P()||X.next.indexOf(Y)>=0&&t("next")||X.prev.indexOf(Y)>=0&&t("prev")||true}function t(Y){if(A(pbOverlay).hasClass("hide")){return false}var X=(this.id=="pbPrevBtn"||Y=="prev")?E:Q,i=B.css("clear")=="both";return a(X,0,i)}function a(i,Y,X){if(i>=0){S=i;l=b[i][0];E=(S||(r.loop?b.length:0))-1;Q=((S+1)%b.length)||(r.loop?0:-1);o();A(U).addClass("pbLoading");!r.loop&&i==b.length-1?u.addClass("hide"):u.removeClass("hide");!r.loop&&i==0?k.addClass("hide"):k.removeClass("hide");if(r.thumbs){I(i,Y,X)}if(E>=0){q.src=b[E][0]}if(Q>=0){V.src=b[Q][0]}r.counter&&J.find(".counter").text("( "+(S+1)+" / "+b.length+" )");r.title&&J.find(".title").text(b[i][1]);j=new Image();j.onload=function(){G(Y)};j.src=l}return false}function I(X,i,Y){v.removeClass("active");v=B.find("li").eq(X).addClass("active");if(Y){return}var Z=v[0].offsetLeft+v[0].clientWidth/2-s.clientWidth/2;i&&B.delay(800);!i&&B.stop();B.animate({scrollLeft:Z},500,"swing")}function G(X){if(!X){A(c).on(N,i);A(U).addClass("hide");jQuery.browser.msie&&i()}else{i()}function i(){A(c).css({transition:"0s"}).attr("class","prepare").hide().off(N);A(U).removeClass("hide");A(c).attr("src",l);setTimeout(function(){A(c).removeAttr("style");setTimeout(function(){c.className=""},0)},0)}A(U).removeClass("pbLoading")}function g(X,Z){var Y=A(c).data("zoom")||1,i=c.getBoundingClientRect();Y=Y+(Z/10);if(Y<0.1){Y=0.1}A(c).data("zoom",Y).css({transform:"scale("+Y+")"});if(i.height>s.clientHeight||i.width>s.clientWidth){A(f).on("mousemove.photobox",d)}else{A(f).off("mousemove.photobox");c.style[x]="50% 50%"}return false}function d(Z){var aa=(Z.pageY/s.clientHeight)*(s.clientHeight+200)-100,X=aa/s.clientHeight*100,Y=Z.pageX/s.clientWidth*100,i=Y+"% "+X+"%";c.style[x]=i}function o(){j.onload=function(){};j.src=q.src=V.src=l}function P(){o();S=E=Q=-1;A(document).off("mousemove");h();A(U).addClass("hide");A(c).bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",i);jQuery.browser.msie&&i();function i(){A(U).removeClass("show hide on");A(c).removeAttr("class").removeAttr("src").removeAttr("style").off().data("zoom",1)}setTimeout(i,500);return false}
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
	 * Licensed under the MIT License (LICENSE.txt).
	 *
	 * Version: 3.0.6
	 */
var O=["DOMMouseScroll","mousewheel"];if(A.event.fixHooks){for(var T=O.length;T;){A.event.fixHooks[O[--T]]=A.event.mouseHooks}}A.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var X=O.length;X;){this.addEventListener(O[--X],z,false)}}else{this.onmousewheel=z}},teardown:function(){if(this.removeEventListener){for(var X=O.length;X;){this.removeEventListener(O[--X],z,false)}}else{this.onmousewheel=null}}};A.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}});function z(ab){var Z=ab||window.event,Y=[].slice.call(arguments,1),ac=0,aa=true,X=0,i=0;ab=A.event.fix(Z);ab.type="mousewheel";if(Z.wheelDelta){ac=Z.wheelDelta/120}if(Z.detail){ac=-Z.detail/3}i=ac;if(Z.axis!==undefined&&Z.axis===Z.HORIZONTAL_AXIS){i=0;X=-1*ac}if(Z.wheelDeltaY!==undefined){i=Z.wheelDeltaY/120}if(Z.wheelDeltaX!==undefined){X=-1*Z.wheelDeltaX/120}Y.unshift(ab,ac,X,i);return(A.event.dispatch||A.event.handle).apply(this,Y)}})(jQuery,document);